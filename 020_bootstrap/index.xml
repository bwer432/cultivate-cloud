<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>2. Bootstrap on Cultivate Cloud</title><link>/020_bootstrap/</link><description>Recent content in 2. Bootstrap on Cultivate Cloud</description><generator>Hugo</generator><language>en-us</language><atom:link href="/020_bootstrap/index.xml" rel="self" type="application/rss+xml"/><item><title>Bootstrap Purpose</title><link>/020_bootstrap/021_bootstrap_purpose/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/020_bootstrap/021_bootstrap_purpose/</guid><description>&lt;h2 id="demo-bootstrap-an-aws-cdk-environment">Demo: Bootstrap an AWS CDK Environment&lt;/h2>
&lt;p>Why would use use the AWS CDK? To automate resource deployment in the AWS cloud.&lt;/p>
&lt;p>We start each demonstration with a slide deck presenting the purpose of the demonstration.
The &lt;em>bootstrap&lt;/em> demo is no different!&lt;/p>
&lt;p>Here are the purpose points for
the &lt;a href="https://github.com/bwer432/cultivatecloud/blob/main/bootstrap/deck.md">bootstrap deck&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>&lt;em>&lt;strong>Why?&lt;/strong>&lt;/em>
I want to automate resource deployment in the AWS cloud.&lt;/li>
&lt;li>&lt;em>&lt;strong>What?&lt;/strong>&lt;/em>
Create an AWS CDK environment.&lt;/li>
&lt;li>&lt;em>&lt;strong>Where?&lt;/strong>&lt;/em>
In my AWS account.&lt;/li>
&lt;li>&lt;em>&lt;strong>How?&lt;/strong>&lt;/em>
Use AWS Cloud Shell.&lt;/li>
&lt;li>&lt;em>&lt;strong>Thenâ€¦&lt;/strong>&lt;/em>
I can use AWS CDK to deploy and destroy AWS resources in my account(s).&lt;/li>
&lt;/ul></description></item><item><title>Bootstrap Steps</title><link>/020_bootstrap/022_bootstrap_steps/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/020_bootstrap/022_bootstrap_steps/</guid><description>&lt;h2 id="use-aws-cloud-shell-for-aws-cdk">Use AWS Cloud Shell for AWS CDK&lt;/h2>
&lt;h3 id="purpose-create-an-aws-cdk-environment">Purpose: Create an AWS CDK environment.&lt;/h3>
&lt;p>Steps:&lt;/p>
&lt;p>&lt;div class='step'>
 Sign into your AWS account.
&lt;/div>

&lt;div class='step'>
 Launch AWS CloudShell.
&lt;/div>

&lt;div class='step'>
 Confirm tools for AWS Cloud Development Kit (AWS CDK).
&lt;/div>

&lt;div class='step'>
 Bootstrap AWS account for CDK.
&lt;/div>

&lt;div class='step'>
 Deploy, destroy, repeat.
&lt;/div>
&lt;/p></description></item><item><title>Bootstrap Script</title><link>/020_bootstrap/023_bootstrap_script/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/020_bootstrap/023_bootstrap_script/</guid><description>&lt;h2 id="bootstrap-aws-cdk">Bootstrap AWS CDK&lt;/h2>
&lt;p>If you simply use the command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cdk bootstrap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>in an unbootstrapped environment,
you would likely receive an error such as:&lt;/p>
&lt;blockquote>
&lt;p>Specify an environment name like &amp;lsquo;aws://123456789012/us-east-1&amp;rsquo;, or run in a directory with &amp;lsquo;cdk.json&amp;rsquo;.&lt;/p>
&lt;/blockquote>
&lt;h2 id="environment--account--region">Environment = Account + Region&lt;/h2>
&lt;p>A CDK &lt;em>&lt;strong>environment&lt;/strong>&lt;/em> consists of an &lt;strong>AWS account&lt;/strong> + &lt;strong>AWS region&lt;/strong>
which you have &lt;em>bootstrapped&lt;/em> to allow using the CDK to deploy resources.&lt;/p>
&lt;div class="mermaid" align="center">
graph TB
subgraph env[CDK Environment]
 account((AWS Account))
 region((AWS Region))
end
&lt;/div>

&lt;p>Therefore, you could provide the &lt;code>cdk bootstrap&lt;/code> command with
the path of the environment in which you wish to deploy resources.&lt;/p></description></item><item><title>Unbootstrap Steps</title><link>/020_bootstrap/027_unbootstrap_steps/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/020_bootstrap/027_unbootstrap_steps/</guid><description>&lt;h2 id="remove-cdk-bootstrap">Remove CDK bootstrap&lt;/h2>
&lt;p>&lt;em>&lt;strong>Purpose&lt;/strong>&lt;/em>: Remove CDK environment if no longer needed.&lt;/p>
&lt;p>If you no longer need to manage resources with the AWS CDK in an environment,
you can &amp;ldquo;unbootstrap&amp;rdquo; that environment.&lt;/p>
&lt;p>This effectively removes the CDK bootstrap&lt;/p>
&lt;p>These are the high-level steps:&lt;/p>
&lt;p>&lt;div class='step'>
 Remove CDKToolkit stack with CloudFormation.
&lt;/div>

&lt;div class='step'>
 Remove CDK bootstrap bucket.
&lt;/div>
&lt;/p></description></item><item><title>Unbootstrap Script</title><link>/020_bootstrap/028_unbootstrap_script/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/020_bootstrap/028_unbootstrap_script/</guid><description>&lt;h2 id="unbootstrap-aws-cdk">Unbootstrap AWS CDK&lt;/h2>
&lt;p>Here is an example script to accomplish the removal of a CDK bootstrap.&lt;/p>
&lt;div class='step'>
 In AWS CloudShell, perform the following commands.
&lt;/div>

&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>aws cloudformation list-stacks --query &lt;span style="color:#e6db74">&amp;#34;StackSummaries[?StackName==&amp;#39;CDKToolkit&amp;#39;&amp;amp;&amp;amp;StackStatus==&amp;#39;CREATE_COMPLETE&amp;#39;]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>aws cloudformation delete-stack --stack-name CDKToolkit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cdkbucket&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>aws s3 ls | grep cdk- | awk &lt;span style="color:#e6db74">&amp;#39;{printf $3}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $cdkbucket
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>aws s3api delete-objects --bucket $cdkbucket &lt;span style="color:#ae81ff">\ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --delete &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>aws s3api list-object-versions &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --bucket $cdkbucket &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --output&lt;span style="color:#f92672">=&lt;/span>json &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --query&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{Objects: Versions[].{Key:Key,VersionId:VersionId}}&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>aws s3api delete-bucket --bucket $cdkbucket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="notices note" >&lt;p>If there are no versions of objects in the bucket to delete,
you may receive an error on the &lt;code>delete-objects&lt;/code> step.
That should be benign.
Continue with the &lt;code>delete-bucket&lt;/code> operation.&lt;/p></description></item><item><title>Extra: Bootstrapping</title><link>/020_bootstrap/029_bootstrap_scratch/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/020_bootstrap/029_bootstrap_scratch/</guid><description>&lt;h2 id="longer-version-of-cdk-bootstrap">Longer version of CDK Bootstrap&lt;/h2>
&lt;p>Here is a video of a longer version of the CDK Bootstrap demonstration.&lt;/p>


 
 &lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
 &lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube-nocookie.com/embed/98I8wk6S0FQ?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
 >&lt;/iframe>
 &lt;/div>

&lt;p>Notes:&lt;/p>
&lt;ul>
&lt;li>Sign in to the AWS account you wish to use.&lt;/li>
&lt;li>Choose the AWS region in which you want to deploy and manage resources.&lt;/li>
&lt;li>Check &lt;code>node&lt;/code>, &lt;code>npm&lt;/code>, &lt;code>cdk&lt;/code> software installation.&lt;/li>
&lt;li>Compose the environment path from the account id and region code.&lt;/li>
&lt;/ul>
&lt;p>This longer video includes references to the &lt;code>cultivatecloud&lt;/code> repo artifacts:&lt;/p></description></item></channel></rss>